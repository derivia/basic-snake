10 HOME
20 LET L = 1
30 LET W = 40 : LET H = 24
40 GOSUB 2000
50 DIM X(100) : DIM Y(100)
60 X(L) = 20 : Y(L) = 12 

65 REM MAIN LOOP
70 GOSUB 3000
80 FOR N = 1 TO 800 - L * 2 : NEXT N : REM SLEEP BETWEEN FRAMES
90 GOTO 70

1000 LET K = PEEK(49152) : REM LAST PRESSED KEY
1010 IF K = 196 THEN X(L) = X(L) + 1 : REM D
1020 IF K = 193 THEN X(L) = X(L) - 1 : REM A
1030 IF K = 215 THEN Y(L) = Y(L) - 1 : REM W
1040 IF K = 211 THEN Y(L) = Y(L) + 1 : REM S
1050 IF X(L) < 1 OR X(L) > W THEN GOTO 6000
1060 IF Y(L) < 1 OR Y(L) > H THEN GOTO 6000
1070 IF L > 1 THEN GOSUB 8000 : REM GROW SNAKE
1080 RETURN

1992 REM: RANDOM INT GENERATION (RND GENERATES FRACTIONAL)
2000 LET FX = INT(RND(1) * (W - 1)) + 1
2010 LET FY = INT(RND(1) * (H - 1)) + 1
2020 HTAB FX : VTAB FY
2030 PRINT "@"
2040 RETURN

3000 HTAB X(1) : VTAB Y(1)
3010 PRINT " " 
3030 IF X(1) = FX AND Y(1) = FY THEN GOSUB 7000
3040 IF L > 1 THEN GOSUB 5000
3050 GOSUB 1000
3060 IF X(L) = FX AND Y(L) = FY THEN GOSUB 4000
3070 HTAB X(L) : VTAB Y(L)
3080 PRINT "$"
3090 RETURN

4000 L = L + 1
4010 X(L) = X(L - 1)
4020 Y(L) = Y(L - 1)
4030 GOSUB 2000
4040 RETURN

5000 FOR I = 1 TO L - 1
5010 X(I) = X(I + 1)
5020 Y(I) = Y(I + 1)
5030 NEXT I
5040 RETURN

6000 REM WALL COLLISION
6010 HOME
6020 HTAB 17 : VTAB 10
6030 HTAB 16 : VTAB 12 : PRINT "SCORE: "
6040 HTAB 22 : VTAB 12 : PRINT L
6050 END

7000 HTAB FX : VTAB FY
7010 PRINT "@"
7020 RETURN

8000 FOR I = 1 TO L - 1
8010 IF X(L) = X(I) AND Y(L) = Y(I) GOTO 6000
8020 NEXT I
8030 RETURN
